{% extends "store/base.html" %}
{% block title %}Offres{% endblock %}
{% block content %}
<section class="py-14">
  <div class="max-w-6xl mx-auto px-4">
    <h1 class="text-3xl font-bold">Nos offres</h1>
    <div class="mt-8 grid md:grid-cols-3 gap-6">
      {% for t in tiers %}
      <div class="relative rounded-3xl border p-6 bg-white shadow-sm hover:shadow-lg transition">
        {% if t.cta_type == 'BUY' %}
          <span class="absolute -top-3 left-6 text-xs px-2 py-1 rounded-full bg-amber-100 text-amber-700 ring-1 ring-amber-200">Populaire</span>
        {% endif %}
        <div class="text-sm text-slate-500">{{ t.get_kind_display }}</div>
        <div class="mt-1 font-semibold text-slate-900">{{ product.title }}</div>
    
        <div class="mt-3">
          {% if t.price_fcfa %}
            <div class="text-3xl font-extrabold">{{ t.price_fcfa }} <span class="text-base font-semibold">FCFA</span></div>
          {% else %}
            <div class="text-3xl font-extrabold">Sur devis</div>
          {% endif %}
        </div>
    
        <div class="prose prose-sm mt-4 text-slate-700">{{ t.description_md|linebreaks }}</div>
    
        <ul class="mt-4 space-y-2 text-sm text-slate-700">
          <li class="flex gap-2"><i data-lucide="check" class="text-blue-600"></i> Garantie 7 jours</li>
          <li class="flex gap-2"><i data-lucide="check" class="text-blue-600"></i> Accès immédiat</li>
          <li class="flex gap-2"><i data-lucide="check" class="text-blue-600"></i> Support email</li>
        </ul>
    
        <div class="mt-6">
          {% if t.cta_type == 'BUY' %}
            <form method="post" action="{% url 'store:buy' product.slug %}">
              {% csrf_token %}
              <input type="hidden" name="tier_id" value="{{ t.id }}">
              <button class="w-full px-5 py-3 rounded-xl bg-blue-600 text-white shadow hover:shadow-lg transition flex items-center justify-center gap-2">
                <i data-lucide="credit-card"></i> Acheter maintenant
              </button>
            </form>
          {% elif t.cta_type == 'QUOTE' %}
            <a href="{% url 'core:contact' %}" class="w-full inline-flex justify-center px-5 py-3 rounded-xl border hover:shadow transition">Demander un devis</a>
          {% else %}
            <a href="{% url 'core:contact' %}" class="w-full inline-flex justify-center px-5 py-3 rounded-xl border hover:shadow transition">Planifier un appel</a>
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    
  </div>
</section>
{% endblock %}
